{%extends "layout/layout.html"%}
{%block content%}

<h3 align="center">แบบฟอร์มติดตามมาตราการสร้างการรับรู้และประชาสัมพันธ์</h3>  
<h4 align="center">โครงการสร้างการรับรู้และเสริมสร้างการเรียนรู้แก่เกษตรกร เพื่อลดความเสี่ยงจากภัยแล้ง</h4>
<hr>

<div class="container">
<table id="form1table" name="form1table" class="display" cellspacing="0" width="100%">
    <thead>
      <tr>
      <td rowspan="3">หน่วยงาน</td>
        <td rowspan="3">โครงการชลประทาน</td>
        <td rowspan="3">จังหวัด</td> 
        <td colspan="4"><center>ผลการดำเนินการ</center></td>
      </tr>
      <tr>     
        <td colspan="2"><center>ศ.พ.ก.</center></td>
        <td colspan="2"><center>JMC</center></td>
        <td rowspan="2"><center>ข่าวประชาสัมพันธ์อื่นๆ (ครั้ง)</center></td>
        <td rowspan="2"><center>ภาพถ่ายการลงพื้นที่</center></td>
        <!--<td rowspan="2"><center>แก้ไข</center></td>
        <td rowspan="2"><center>ลบ</center></td>-->
      </tr>
      <tr>     
        <td><center>ครั้ง</center></td>
        <td><center>เกษตรกร(คน)</center></td>
        <td><center>ครั้ง</center></td>
        <td><center>เกษตรกร(คน)</center></td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>office_name</td>
        <td>agency_name</td>
        <td>province</td>
        <td>SPK_time</td>
        <td>SPK_person</td>
        <td>JMC_time</td>
        <td>JMC_person</td>
        <td>Uploads</td>
        
      </tr>
    </tbody>
  </table>
</div>
<!--</div>-->


<script type="text/javascript">
    var obj = {{ lists | dump | safe}};
    //console.log(obj);
    //console.log(obj[1].Uploads[0].path);

    $('#form1table').DataTable({
      data: obj,
      "columns": [
      { data : "office_name" },
      { data : "agency_name" },
      { data : "province" },
      { data : "SPK_time" },
      { data : "SPK_person" },
      { data : "JMC_time" },
      { data : "JMC_person" },
      { data : "news" },
      { data : "Uploads" , render: function(d){
        console.log(JSON.stringify(d));
        return d;
        /*for(i=0; i<d.length; i++){
          console.log(d[0].path);
        }*/
        //return (d);
          /*for(var i=0; i<d.length; i++){
            var im = d[i].path;
            return '<img src='+im+'/>';
          }*/
          
        }
      },

      //{ data: "img", "render": img},
      /*{
        "render" : function(data, type, full, meta){
          return '<a class="btn btn-defalt" href="#"><span class="glyphicon glyphicon-pencil"></span></a>';
        }
      },
      {
        "render" : function(data, type, full, meta){
          return '<a class="btn btn-danger" href="#"><span class="glyphicon glyphicon-trash"></span></a>';
        }
      }*/

    ],
      "pagingType": "full_numbers",
      dom: 'Bfrtip',
      buttons: [
          'copy', 'csv', 'excel', 'pdf', 'print'
      ]
      
    });
    function img(data, type, full, meta){
      //var obj = {{ lists | dump | safe}};
      /*obj.forEach(function(entry){
        for(var i=0; i<5; i++){
          console.log(entry[i]);
        }
      });*/
      
      return '<img src=obj[1].Uploads[0].path/>';
    }
</script>
	
{%endblock%}

